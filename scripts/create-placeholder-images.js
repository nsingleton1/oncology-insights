/**
 * Script to generate placeholder images for the application
 * 
 * This script creates basic image files needed for the app:
 * - favicon.ico
 * - logo192.png
 * - logo512.png
 * 
 * In a real project, you would use actual image files.
 */

const fs = require('fs');
const path = require('path');

const publicDir = path.join(__dirname, '../public');
const placeholder192 = path.join(publicDir, 'logo192.png');
const placeholder512 = path.join(publicDir, 'logo512.png');
const faviconPlaceholder = path.join(publicDir, 'favicon.ico');

// Very minimal PNG file bytes (1x1 transparent pixel)
const minimalPNG = Buffer.from([
  0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, 0x00, 0x00, 0x00, 0x0D,
  0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01,
  0x08, 0x06, 0x00, 0x00, 0x00, 0x1F, 0x15, 0xC4, 0x89, 0x00, 0x00, 0x00,
  0x0A, 0x49, 0x44, 0x41, 0x54, 0x78, 0x9C, 0x63, 0x00, 0x01, 0x00, 0x00,
  0x05, 0x00, 0x01, 0x0D, 0x0A, 0x2D, 0xB4, 0x00, 0x00, 0x00, 0x00, 0x49,
  0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82
]);

// Very minimal ICO file bytes
const minimalICO = Buffer.from([
  0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x68, 0x00, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00, 0x28, 0x00,
  0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x01, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
]);

console.log('Creating placeholder image files for the application...');

// Create/overwrite the placeholder files
try {
  // First, if favicon exists but is a text file, delete it
  if (fs.existsSync(faviconPlaceholder)) {
    try {
      const fileContent = fs.readFileSync(faviconPlaceholder, 'utf8');
      // If we can read it as text, it's likely our commented placeholder
      if (fileContent.includes('// This is a placeholder')) {
        console.log('Removing text-based favicon placeholder...');
        fs.unlinkSync(faviconPlaceholder);
      }
    } catch (err) {
      // If error reading as text, it's likely already a binary file
      console.log('Favicon is already a binary file, will overwrite.');
    }
  }

  // Create placeholder logo192.png
  fs.writeFileSync(placeholder192, minimalPNG);
  console.log(`✅ Created placeholder: ${placeholder192}`);
  
  // Create placeholder logo512.png
  fs.writeFileSync(placeholder512, minimalPNG);
  console.log(`✅ Created placeholder: ${placeholder512}`);
  
  // Create placeholder favicon.ico
  fs.writeFileSync(faviconPlaceholder, minimalICO);
  console.log(`✅ Created placeholder: ${faviconPlaceholder}`);
  
  console.log('Successfully created all placeholder images.');
} catch (error) {
  console.error('Error creating placeholder images:', error);
  process.exit(1);
} 